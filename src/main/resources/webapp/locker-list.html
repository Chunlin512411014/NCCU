<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Locker List</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .inuse-status { background-color: #28a745; color: #fff; }
    .pending-status { background-color: #ffc107; color: #000; }
    .completed-status { background-color: #007bff; color: #fff; }
    .default-status { background-color: #6c757d; color: #fff; }
    .hidden { display: none; }

    h2 {
      font-family: 'Roboto', sans-serif; 
      font-weight: 700; 
      color: #FFD306; 
    }

    .idle-status {
      background-color: #007bff;
      color: #fff;
    }

    .inuse-status {
      background-color: #ffc107;
      color: #000;
    }
  </style>
</head>
<body>

<div class="container mt-5" th:fragment="content">
  <h2 class="mb-4">Locker List</h2>
  <div>
    <table class="table">
      <thead>
        <tr>
          <th scope="col">名稱</th>
          <th scope="col">狀態</th>
          <th scope="col">位置</th>
          <!-- <th scope="col">建立時間</th> -->
          <th scope="col">到期時間</th>
        </tr>
      </thead>
      <tbody>
        <!-- 使用 thymeleaf 動態產出 box list -->
        <tr th:each="box : ${boxes}">
          <td>
            <!-- 修改 box 名稱的連結 -->
         <a th:href="@{'/api/Boxes/' + ${box.id}}"> 
              <span th:text="${box.name}"></span>
            </a>
          </td>
          <td>
           <!--  <span class="badge" th:classappend="${box.status == 'In-use' ? 'inuse-status' : ''} ${box.status == 'Pending' ? 'pending-status' : ''} ${box.status == 'IDLE' ? 'completed-status' : 'default-status'}" th:text="${box.status}"></span> -->
         <span class="badge"
            th:class="|${box.status == 'A' ? 'idle-status' : ''} ${box.status == 'UA' ? 'inuse-status' : ''} ${box.status == 'A' ? 'completed-status' : 'default-status'}|"
            th:text="${box.status == 'A' ? '空閒中' : (box.status == 'UA' ? '使用中' : '其他狀態')}"></span>
              <!-- 如果 box 狀態為 'Active'，則顯示 user id -->
            <!-- 如果 box 狀態為 'Active'，則顯示 user id -->
         <!--    <span th:if="${box.status == 'In-use' and box.userId != null}" th:text="' (User ID: ' + ${box.userId} + ')'"></span> -->
          </td>
          <!-- 修改 box 位置的超連結，直接指向 box-map.html -->
          <td>
           <!--  <a th:href="@{'box-map.html?locationName=' + ${box.location}}"> -->
            <a th:href="@{'/api/Boxes/' + ${box.id} + '/location'}">
            <button class="btn btn-link" type="button" th:text="${box.location}"></button>
            </a>
          </td>
          <!-- <td th:text="${#dates.format(box.createdTime, 'yyyy-MM-dd HH:mm:ss')}"></td> -->
          <td th:text="${#dates.format(box.useTime, 'yyyy-MM-dd HH:mm:ss')}"></td>
        </tr>
</div>

<!-- <div class="container mb-5 text-center">
  <a href="index.html" class="btn btn-primary">返回首頁</a>
</div> -->

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
